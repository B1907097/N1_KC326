<!DOCTYPE html>
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Chartjs</title>
   <link rel="icon" type="image/x-icon" href="./Trangchu_files/favorite.png">
	<link rel="stylesheet" href="./Chartjs_files/index.css">

	<!-- thư viện chartjs -->
	<script
	src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js">
	</script> 

<script>
  function thongKe()
    {
        var request = new XMLHttpRequest();
        var urlHere = "https://api.thingspeak.com/update?";
        urlHere = "https://api.thingspeak.com/channels/1693805/feeds.json";
        request.open('GET', urlHere, true);
        request.onload = function() {
            if (request.status == 200) {
                var data = JSON.parse(request.responseText);
                //console.log(data);
                var length = data.feeds.length;  //kich thuoc du lieu
                //loc bo cac phan tu null
                dataTemp = new Array();
                dataHumi = new Array();
                for(i=0;i<length;i++){
                  if (data.feeds[i].field1 != null){
                    dataTemp.push(data.feeds[i].field1);
                  }
                  if (data.feeds[i].field2 != null){
                    dataHumi.push(data.feeds[i].field2);
                  }
                }
               
                //Ve bieu đồ nhập xuất
                var yTemp = new Array();
                var yHumi = new Array();
                var xTemp = new Array();
                var xHumi = new Array();
                for(var i=0;i<length;i++){
                  if (data.feeds[i].field1 != null){
                    yTemp.push(data.feeds[i].field1);
                    xTemp.push(data.feeds[i].created_at);
                  }
                  if (data.feeds[i].field2 != null){
                    yHumi.push(data.feeds[i].field2);
                    xHumi.push(data.feeds[i].created_at);
                  }
                }
                //bieu đồ
                new Chart("chartTemp", {
                    type: "bar",
                    data: {
                        labels: xTemp,
                        datasets: [
                        {
                            fill: false,
                            backgroundColor: "red",
                            label: "Nhiệt độ của máy ấp trứng ",
                            data: yTemp
                        }, 
                        ]
                    },
                    options: {
                        plugins:{
                            legend: {
                              display: false,
                            }
                        },
                        scales: {
                            yAxes: [{
                              display: true,
                              ticks: {
                                beginAtZero: false,
                                //max: (yTemp.max)
                              }
                            }]
                        }
                    }
                });
                new Chart("chartHumi", {
                    type: "bar",
                    data: {
                        labels: xHumi,
                        datasets: [
                        {
                            fill: false,
                            backgroundColor: "blue",
                            label: "Độ ẩm của máy ấp trứng ",
                            data: yHumi
                        }, 
                        ]
                    },
                    options: {
                        plugins:{
                            legend: {
                                display: true,
                            }
                        },
                        scales: {
                            yAxes: [{
                                display: true,
                                ticks: {
                                    beginAtZero:false,
                                    //max: (yHumi.max)
                                }
                            }]
                        }
                    }
                });

            } else {
            // We reached our target server, but it returned an error
            }
        };
        request.send();

        
        //request.open('GET', urlHere, true);
        //request.send();
    }
</script>  

<style type="text/css">@font-face { font-family: Roboto; src: url("chrome-extension://mcgbeeipkmelnpldkobichboakdfaeon/css/Roboto-Regular.ttf"); }</style></head>

<body onload="thongKe()">

	<div class="root">

		<!-- thanh điều hướng -->
		<div id="header">



	<title>Header</title>
	
	<link rel="shortcut icon" href="./Chartjs_files/0305-logo-ctu.png">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="./Chartjs_files/header.css">






	<div class="background">
		<header>
			<div class="header_container">
				<div class="header_logo">
					<a href="https://www.ctu.edu.vn/">  <img src="./Chartjs_files/0305-logo-ctu.png" alt="Logo Đại học Cần Thơ" width="40"></a>
				</div>
				<div class="wide">
					<nav class="header_nav">
						<ul>
							<li><a href="https://b1907097.github.io/N1_KC326/index.html"><i class="fa fa-fw fa-home"></i>trang chủ</a></li>
                    <li><a href="https://b1907097.github.io/N1_KC326/gioithieuthanhvien.html"><i class="fa fa-user-plus" aria-hidden="true"></i>thành viên</a></li>
                    <li><a href="https://b1907097.github.io/N1_KC326/ytuong.html"><i class="fa fa-lightbulb-o" aria-hidden="true"></i>ý tưởng thực hiện</a></li>
                    <li><a href="#">    <i class="fa fa-caret-down"></i> Điều khiển & theo dõi Hệ thống  </a>
                <ul class="sub">
                  <li><a href="https://b1907097.github.io/N1_KC326/dk.html"><i class="fa fa-cog" aria-hidden="true"></i>thiết lập thông số </a></li>
                        <li><a href="https://b1907097.github.io/N1_KC326/Chartjs.html"><i class="fa fa-line-chart" aria-hidden="true"></i>Nhiệt độ, độ ẩm Chart</a></li>
                      </ul>
                      <li><a href="https://b1907097.github.io/N1_KC326/lien_he.html"><i class="fa fa-phone" aria-hidden="true"></i>liên Hệ</a></li>
                    
                    <li><a href="#">    <i class="fa fa-caret-down"></i>Mở rộng  </a>
                <ul class="sub">
                  <li><a href="https://www.ctu.edu.vn/">CTU</a></li>
                  <li><a href="https://elearning.ctu.edu.vn/">Elearning</a></li>
                  <li><a href="https://htql.ctu.edu.vn/">HTQL</a></li>

								</ul>
							</li>
						</ul>
					</nav>
				</div>
			</div>
		</header>
	</div>




</div>
		<script src="./Chartjs_files/include-header.js.taixuong" type="module"></script>

		<!-- nội dung -->
		<div class="content">
			<h3 class="top_title">
				thông số nhiệt, độ ẩm thu thập từ máy ấp trứng <br>
				sử dụng Chart.js
			</h3><br>
			<div class="box-width add-box-background centerchart">

				<div id="canvas-container">
					<canvas id="chartTemp" style="display: block; box-sizing: border-box; height: 330px; width: 700px;" width="1650" height="330"></canvas>
					<canvas id="chartHumi" style="display: block; box-sizing: border-box; height: 330px; width: 700px;" width="1650" height="330"></canvas>
				</div>

			</div>



			<!-- fill color to color picker -->
			<script>
				for (const color of document.querySelectorAll('.colorpicker')) {
					color.style.backgroundColor = '#' + color.id
				}
			</script>


		</div>
		
		<div id="footer">



	
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	 <title>Footer</title>

  <style>
    .footer-container a,
    .footer-container a:hover,
    .footer-container a:visited {
      color: transparent;
      text-decoration: none;
    }


    .footer-container {
      background: linear-gradient(135deg,   #0000FF 10%,      #FFFF00 100%);
      width: 100vw;
      height: 45px;
      display: flex;
      align-items: center;

    }

    .footer-container p {
      flex: 1;
      text-align: center;
      color: white;
      font-size: 15px;
      margin: 0
    }

    .footer-avt {
      height: 100%;
      display: flex;
      align-items: center;
    }
    
    
    
    .footer-avt a {
      display: flex;
      align-items: center;
    }
    
    .teacher-avt a {
      display: flex;
      align-items: center;
    }
  
    
    

    .footer-avt img,
    .teacher-avt img {
      margin-right: 30px;
      border-radius: 50%;
      width: 25px;
    }

    .teacher-avt img {
      margin-left: 8px;

    }

    .footer-avt img:hover {
      border: 2px solid black;
    }
  </style>





  <div class="footer-container">

    <div class="teacher-avt">
      <a href="https://qldiem.ctu.edu.vn/htql/canbo/llkh/codes/LyLichKhoaHoc_in.php?macb=002128/">
        <img src="./Gioithieuthanhvien_files/teacher.png" alt="">
      </a>
    </div>

    <p id="copyright">Copyright © 2022 - Nhóm 1</p>

    <div class="footer-avt">
          
       <a href="https://www.facebook.com/cham.2890">
        <img src="./Trangchu_files/cham.jpg" >
      </a>
      
      <a href="https://www.facebook.com/han.kieu.397">
        <img src="./Trangchu_files/han.jpg" >
      
      <a href="https://www.facebook.com/profile.php?id=100009103916735">
        <img src="./Trangchu_files/thien.jpg">
      </a>
      
      <a href="https://www.facebook.com/vinh.nguyenvan.161/">
        <img src="./Trangchu_files/vinh.jpg" >
      </a>
      
      <a href="https://www.facebook.com/profile.php?id=100015979958185">
        <img src="./Trangchu_files/tien.jpg" >
      </a>
    </div>


	</div>






</div>
		<script src="./Chartjs_files/include-footer.js.taixuong" type="module"></script>
		
	</div>


	<script src="./Chartjs_files/index.js.taixuong" type="module"></script>





</body></html>